<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chinese Character Display with Pinyin</title>
    <script src="language.js"></script>
     <style>
        body {
          font-family: Arial, sans-serif;
        }

        .note {
          position: absolute;
          bottom: 20px;
          left: 20px;
          font-size: 25px;
          color: #666;
        }

        #info {
          position: absolute;
          top: 20px;
          left: 20px;
          font-size: 25px;
          text-align: right;
          color: #666;
        }

        #mode, #charset {
          text-align: left;
          font-weight: bold;
        }

        #rank-min, #rank-max {
          width: 100px;
          font-size: 25px;
          color: #666;
        }

        #main {
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          width: 500px;
          height: 500px;
          flex-direction: column;
        }

        #question, #answer, #description {
          height: 50%;
          align-items: center;
          text-align: center;
          justify-content: center;
        }

        #question, #answer {
          font-size: 150px;
        }

        #description {
          font-size: 25px;
        }
    </style>
</head>
<body>
    <div class="note">
      Press <strong>enter</strong> to get the next question.<br>
      Press <strong>space bar</strong> to get the answer.<br>
      Press <strong>h</strong> to show a translation.<br>
      Press <strong>dot</strong> to change the question/anwser mode.<br>
      Press <strong>+</strong> to change the character set.
    </div>
    <table id="info">
      <tr>
        <td>mode:</td>
        <td id="mode"/>
      </tr>
      <tr>
        <td>character set:</td>
        <td id="charset"/>
      </tr>
      <tr>
        <td>rank range:</td>
        <td>
          <input id="rank-min" type="number"> - <input id="rank-max" type="number">
        </td>
      </tr>
    </table>
    <div id="main">
      <div id="question"></div>
      <div id="answer"></div>
      <div id="description"></div>
    </div>

  <script>
    let mode = "character";
    let characterSet = "simplified";
    const question = { "character": characterSet, "pinyin": "pinyin" }
    const answer = { "character": "pinyin", "pinyin": characterSet }
    const modeFlipper = { "character": "pinyin", "pinyin": "character" };
    const characterSetFlipper = { "simplified": "traditional", "traditional": "simplified" };
    let current = null;
    setup();

    function setup() {
      document.getElementById("rank-max").value = language.length;
      let rmax = document.getElementById("rank-max");
      let rmin = document.getElementById("rank-min");
      rmin.value = 1;
      rmax.value = 100;
      rmin.min = 1;
      rmin.max = language.length;
      rmax.min = 1;
      rmax.max = language.length;
      updateInfo();
    }

    function getRandomNumberInRange(min, max) {
      let size = max - min + 1;
      return Math.floor(Math.random() * size) + min;
    }

    function displayQuestion() {
      const randomIndex = getRandomNumberInRange(
        parseInt(document.getElementById("rank-min").value, 10),
        parseInt(document.getElementById("rank-max").value, 10)
      );
      current = language[randomIndex];
      document.getElementById("question").innerText = current[question[mode]];
      document.getElementById("answer").innerText = "";
      document.getElementById("description").innerText = "";
    }

    function displayAnswer() {
      document.getElementById("answer").innerText = current[answer[mode]];
    }

    function updateInfo() {
      document.getElementById("mode").innerText = `${mode}`;
      document.getElementById("charset").innerText = `${characterSet}`;
    }

    function displayDescription() {
      document.getElementById("description").innerText = current.description;
    }

    document.addEventListener("keydown", (event) => {
      switch (event.key) {
        case '.':
          mode = modeFlipper[mode];
          updateInfo();
          break;
        case '+':
          characterSet = characterSetFlipper[characterSet];
          updateInfo();
          break;
        case 'Enter':
          displayQuestion();
          break;
        case ' ':
          displayAnswer();
          break;
        case 'h':
          displayDescription();
          break;
        default:
      }
    });
  </script>

</body>
</html>

